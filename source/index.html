<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Skin Care Consultation</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="images/favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital,opsz,wght@0,6..96,400..900;1,6..96,400..900&display=swap" rel="stylesheet">
  </head>

  <body>

    <div id="genericModal" class="modal-container" style="display: none;">
      <div class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <div id="modalDynamicContent"></div>
        </div>
      </div>
    </div>

    <div class="heading-small">
      <img src="images/ftt-logo.png" alt="FTT Logo" width="420" height="80"/>
    </div>

    <div class="title-large">Skin Care Consultation</div>

    <div class="subtitle-medium">
      Give us a moment of your time and we will formulate a unique skin care
      regime just for you
    </div>
    <div id="welcomeScreen">
      <h2>Hello, My name is Frances. I’m an aesthetic nurse.</h2>
      <p>Today I’ll create a personalised skincare routine for you!</p>
      <button id="startConsultationButton" class="btn-start" disabled>Start</button>
      <label class="confirmTerms">
        <input type="checkbox" id="termsCheckbox" />
        Please tick here to confirm that you agree to us managing the personal data you share with us.
      </label>
      
      <div id="errorMessageContainer">
        <p id="errorNotification">
          Please tick the box to consent before proceeding.
        </p>
      </div>

    </div>
    
    <div id="questionsContainer">
      <!-- Initial questions already provided, skipping to new additions -->

      <!-- Exit Point -->
      <div id="questionExitPoint" class="question" style="display: none">
        <label for="exitPointLabel">SORRY</label>
        <p id="exitPointParagraph">
          Today I’ll create a personalised skincare routine for you!
        </p>
        <button onclick="goToPreviousQuestion()" class="btnBack">&larr; Go Back</button>
      </div>

      <!-- Question: Skin Concern -->
      <div id="questionSkinConcern" class="question" style="display: none">
        <label for="skinConcernSelect"
          >What is your primary skin concern?</label
        >
        <select
          id="skinConcernSelect"
          name="skinConcernSelect"
          onchange="filterProducts('skinConcern', this.value)"
        >
          <option value="">Select...</option>
          <option value="dryDehydrated">Dry/Dehydrated</option>
          <option value="acne">Spot-Prone</option>
          <option value="wrinklesFinelines">Maturing</option>
          <option value="rosacea">Rosacea/Sensitive</option>
          <option value="unevenSkinTone">Uneven Skin Tone</option>
          <option value="improvements">Improvements</option>
        </select>

        <div>
          <button class="modal-trigger" data-modal-content="skinConcern">
            What is my primary skin concern?
          </button> 
        </div>

        <div class="dot-container" id="dotConcern"></div>
      </div>

      <!-- Question: Based in UK -->
      <div id="questionBasedUK" class="question" style="display: none">
        <label for="basedUKSelect">Are you based in the UK?</label>

        <div>
          <button onclick="filterProducts('basedUK', 'no')" class="btn-option">No</button>
          <button onclick="filterProducts('basedUK', 'yes')" class="btn-option">Yes</button>
        </div>

        <button onclick="goToPreviousQuestion()" class="btnBack">&larr; Go Back</button>

        <!-- Dot container under each question -->
        <div class="dot-container" id="dotUK"></div>
      </div>

      <!-- Question: Age over 25 -->
      <div id="questionOverTwentyFive" class="question" style="display: none">
        <label for="overTwentyFiveSelect">Are you over 25 years old?</label>

        <div>
          <button onclick="filterProducts('overTwentyFive', 'no')" class="btn-option">No</button>
          <button onclick="filterProducts('overTwentyFive', 'yes')" class="btn-option">Yes</button>
        </div>

        <button onclick="goToPreviousQuestion()" class="btnBack">&larr; Go Back</button>

        <!-- Dot container under each question -->
        <div class="dot-container" id="dot25"></div>
      </div>

      <!-- Question: Wrinkles or Fine Lines 
      <div
        id="questionWrinklesFinelines"
        class="question"
        style="display: none"
      >
        <h2>Do you have fine lines, wrinkles, or both?</h2>

        <div class="options-wrapper">
          <div class="option-container">
            <img
              src="fine_lines_image.jpg"
              alt="Fine Lines"
              onclick="filterProducts('wrinklesFinelines', 'finelines')"
            />
            <div class="text-container">
              <b>Fine lines</b>
              <p>
                Shallow lines on the skin mainly near the eye area or laugh lines
              </p>
            </div>
          </div>

          <div class="option-container">
            <img
              src="wrinkles_image.jpg"
              alt="Wrinkles"
              onclick="filterProducts('wrinklesFinelines', 'wrinkles')"
            />
            <div class="text-container">
              <b>Wrinkles</b>
              <p>
                Deep folds on the skin due to loss of elasticity or thinning of the skin
              </p>
            </div>
          </div>
        </div>

        <select
          id="wrinklesFinelinesSelect"
          name="wrinklesFinelinesSelect"
          onchange="filterProducts('wrinklesFinelines', this.value)"
        >
          <option value="">Select...</option>
          <option value="both">Both</option>
          <option value="wrinkles">Wrinkles</option>
          <option value="finelines">Fine lines</option>
        </select>
        <button onclick="goToPreviousQuestion()" class="btnBack">&larr; Go Back</button>

         Dot container under each question
        <div class="dot-container">
          <span class="dotdark"></span>
          <span class="dotdark"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
        </div>
      </div>

       Question: Dark spots / Hyper pigmentation 
      <div
        id="questionTypeOfHyperpigmentation"
        class="question"
        style="display: none"
      >
        <h2>Which type of hyper pigmentation do you have?</h2>

        <div class="options-wrapper">
          <div class="option-container">
            <img
              src="fine_lines_image.jpg"
              alt="Dark Spots"
              onclick="filterProducts('typeOfHyperpigmentation', 'darkSpots')"
            />
            <div class="text-container">
              <b>Dark Spots</b>
            </div>
          </div>

          <div class="option-container">
            <img
              src="wrinkles_image.jpg"
              alt="Melasma"
              onclick="filterProducts('typeOfHyperpigmentation', 'melasma')"
            />
            <div class="text-container">
              <b>Melasma</b>
              <p>
                Brown or greyish patches of pigmentation that is darker than natural skin tone
              </p>
            </div>
          </div>

          <div class="option-container">
            <img
              src="wrinkles_image.jpg"
              alt="Undereye Darkness"
              onclick="filterProducts('typeOfHyperpigmentation', 'undereyeDarkness')"
            />
            <div class="text-container">
              <b>Undereye Darkness</b>
            </div>
          </div>
        </div>

        <select
          id="wrinklesFinelinesSelect"
          name="wrinklesFinelinesSelect"
          onchange="filterProducts('typeOfHyperpigmentation', this.value)"
        >
          <option value="">Select...</option>
          <option value="darkSpots">Dark Spots</option>
          <option value="melasma">Melasma</option>
          <option value="undereyeDarkness">Undereye Darkness</option>
        </select>
        <button onclick="goToPreviousQuestion()" class="btnBack">&larr; Go Back</button>

         Dot container under each question 
        <div class="dot-container">
          <span class="dotdark"></span>
          <span class="dotdark"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
        </div>
      </div>

    -->

      <!-- Question: Type of Acne -->
      <div id="questionTypeOfAcne" class="question" style="display: none">
        <label>What type of acne do you have?</label>
        <!--
        <div class="options-wrapper">
          <div class="option-container">
            <div class="text-container">
              <b>Cystic</b>
              <p>
                Inflammatory acne that causes painful, pus-filled pimples to form deep under the skin
              </p>
            </div>
          </div>

          <div class="option-container">
            <div class="text-container">
              <b>Blackheads</b>
              <p>
                Open bumps on the skin that fill with excess oil and dead skin cells
              </p>
            </div>
          </div>
        </div>

        <div class="options-wrapper">
          <div class="option-container">
            <div class="text-container">
              <b>Papules</b>
              <p>
                Papules are solid, inflamed bumps in your skin that may be the same color as your skin or red, brown or purple.
              </p>
            </div>
          </div>

          <div class="option-container">
            <div class="text-container">
              <b>Whiteheads</b>
              <p>
                Oil and dead skin close off hair follicles or oil glands and form a closed bump on your skin
              </p>
            </div>
          </div>
        </div>
        -->

        <select
          id="TypeOfAcneSelect"
          name="TypeOfAcneSelect"
          onchange="filterProducts('typeOfAcne', this.value)"
        >
          <option value="">Select...</option>
          <option value="cystic">Cystic</option>
          <option value="blackheads">Blackheads</option>
          <option value="papules">Papules</option>
          <option value="whiteheads">Whiteheads</option>
        </select>
        <div>
          <button class="modal-trigger" data-modal-content="acneType">
            What is my acne type?
          </button> 
        </div>
        <button onclick="goToPreviousQuestion()" class="btnBack">&larr; Go Back</button>

        <div class="dot-container" id="dotAcne"></div>
      </div>

      <!-- Question: Severity of Acne -->
      <div id="questionSeverityOfAcne" class="question" style="display: none">
        <label for="SeverityOfAcneSelect">How severe is your acne?</label>
        <select
          id="SeverityOfAcneSelect"
          name="SeverityOfAcneSelect"
          onchange="filterProducts('severityOfAcne', this.value)"
        >
          <option value="">Select...</option>
          <option value="mild">Mild</option>
          <option value="moderate">Moderate</option>
          <option value="severe">Severe</option>
        </select>

        <div>
          <button class="modal-trigger" data-modal-content="severity">
            What do these severity levels mean?
          </button> 
        </div>

        <button onclick="goToPreviousQuestion()" class="btnBack">&larr; Go Back</button>
        <div class="dot-container" id="dotSeverity"></div>
      </div>

      <!-- Question: Have You Used Vitamin C Before -->
      <div id="questionUsesVitaminC" class="question" style="display: none">
        <label for="UsesVitaminCSelect"
          >Have you used Vitamin C products before?</label
        >

        <div>
          <button onclick="filterProducts('usesVitaminC', 'no')" class="btn-option">No</button>
          <button onclick="filterProducts('usesVitaminC', 'yes')" class="btn-option">Yes</button>
         </div>

        <button onclick="goToPreviousQuestion()" class="btnBack">&larr; Go Back</button>

        <!-- Dot container under each question -->
        <div class="dot-container" id="dotVitC"></div>
      </div>

      <!-- Question: What Concentration of Vitamin C Do You Use 
      <div
        id="questionVitaminCConcentrate"
        class="question"
        style="display: none"
      >
        <label for="vitaminCConcentrateSelect">What concentration?</label>
        <select
          id="vitaminCConcentrateSelect"
          name="vitaminCConcentrateSelect"
          onchange="filterProducts('vitaminCConcentrate', this.value)"
        >
          <option value="">Select...</option>
          <option value="10">10%</option>
          <option value="15">15%</option>
          <option value="20">20%</option>
        </select>
        <button onclick="goToPreviousQuestion()" class="btnBack">&larr; Go Back</button>
        <div class="dot-container">
          <span class="dotdark"></span>
          <span class="dotdark"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
          <span class="dotlight"></span>
        </div>
      </div> -->

      <!-- Question: Are You Allergic To The Following? -->
      <div id="questionAllergy" class="question" style="display: none">
        <label for="allergySelect"
          >Are you allergic to any of the following products? </label
        >
        <p style="font-size: 14px;">(Simply click "proceed" if none)</p>

        <form id="allergyForm">
          
          <label for="niacinamide" class="allergyCheckbox">
            <input type="checkbox" id="niacinamide" name="allergy" value="niacinamide">
            Niacinamide
          </label>
          
          <label for="retinolsRetinoids" class="allergyCheckbox">
            <input type="checkbox" id="retinolsRetinoids" name="allergy" value="retinolsRetinoids">
            Retinols/Retinoids
          </label>

          <label for="salicylicAcid" class="allergyCheckbox">
            <input type="checkbox" id="salicylicAcid" name="allergy" value="salicylicAcid">
            Salicylic Acid
          </label>
          
          <label for="azelaicAcid" class="allergyCheckbox">
            <input type="checkbox" id="azelaicAcid" name="allergy" value="azelaicAcid">
            Azelaic Acid
          </label>

          <label for="fragrances" class="allergyCheckbox">
            <input type="checkbox" id="fragrances" name="allergy" value="fragrances">
            Fragrances
          </label>
        </form>
        
        <!-- In your HTML, directly call gatherMultipleFilters() without passing questionType -->

        <button onclick="goToPreviousQuestion()" class="btnBack">&larr; Go Back</button>
        <button onclick="gatherMultipleFilters('allergyForm')" class="btnNext">
          Proceed &#8594;
        </button>
       
        <!-- Dot container under each question -->
        <div class="dot-container" id="dotAllergy"></div>
      </div>

      <!-- Question: Take Prescription -->
      <div id="questionTakePrescription" class="question" style="display: none">
        <label for="takePrescriptionSelect"
          >Do you take any medication that might interact with skincare or
          topical prescription medications?</label
        >

        <div>
          <button onclick="filterProducts('takePrescription', 'no')" class="btn-option">No</button>
          <button onclick="filterProducts('takePrescription', 'yes')" class="btn-option">Yes</button>
         </div>

        <button onclick="goToPreviousQuestion()" class="btnBack">&larr; Go Back</button>

        <div class="dot-container" id="dotPrescription"></div>
      </div>

      <!-- Question: Non-prescription Retinoids Use -->
      <div id="questionRetinoidUse" class="question" style="display: none">
        <label for="retinoidUseSelect" style="padding:0px 40px;">
          Are you using any non-prescription retinoids (such as retinol)?
        </label>

        <div>
          <button onclick="filterProducts('retinoidUse', 'no')" class="btn-option">No</button>
          <button onclick="filterProducts('retinoidUse', 'yes')" class="btn-option">Yes</button>
         </div>

        <button onclick="goToPreviousQuestion()" class="btnBack">&larr; Go Back</button>
        <div class="dot-container" id="dotRetinoid"></div>
      </div>

      <!-- Question: Retinoid Irritation -->
      <div
        id="questionRetinoidIrritation"
        class="question"
        style="display: none"
      >
        <label for="retinoidIrritationSelect" style="padding:0px 40px;">
          Have you experienced irritation while using these products?
        </label>

        <div>
          <button onclick="filterProducts('retinoidIrritation', 'no')" class="btn-option">No</button>
          <button onclick="filterProducts('retinoidIrritation', 'yes')" class="btn-option">Yes</button>
        </div>

        <button onclick="goToPreviousQuestion()" class="btnBack">&larr; Go Back</button>

        <!-- Dot container under each question -->
        <div class="dot-container" id="dotIrritation"></div>
      </div>

      <!-- Question: skinType -->
      <div id="questionSkinType" class="question" style="display: none">
        <label for="skinTypeSelect">What is your skin type?</label>
        <select
          id="skinTypeSelect"
          name="skinTypeSelect"
          onchange="filterProducts('skinType', this.value)"
        >
          <option value="">Select...</option>
          <option value="normal">Normal</option>
          <option value="oily">Oily</option>
          <option value="dry">Dry</option>
          <option value="combination">Combination</option>
        </select>
        <button onclick="goToPreviousQuestion()" class="btnBack">&larr; Go Back</button>

        <!-- Dot container under each question -->
        <div class="dot-container" id="dotSkinType"></div>
      </div>

      <!-- Question: skinSensitivity -->
      <div id="questionSkinSensitivity" class="question" style="display: none">
        <label for="skinSensitivitySelect">Is your skin sensitive?</label>

        <div>
          <button onclick="filterProducts('skinSensitivity', 'no')" class="btn-option">No</button>
          <button onclick="filterProducts('skinSensitivity', 'yes')" class="btn-option">Yes</button>
         </div>

        <button onclick="goToPreviousQuestion()" class="btnBack">&larr; Go Back</button>

        <!-- Dot container under each question -->
        <div class="dot-container" id="dotSensitivity"></div>
      </div>

      <!-- Question: skinConcernArea -->
      <div id="questionConcernArea" class="question" style="display: none">
        <label for="ConcernAreaSelect">Select your areas of concern</label>
        <p style="font-size: 14px;">(Simply click "proceed" if none)</p>
        <div
          style="
            display: flex;
            flex-direction: row;
            justify-content: space-evenly;
          "
        >
          <div style="flex: 3">
            <figure id="concernAreaSVG">
              <svg
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                viewBox="0 0 572 800"
              >
                <image
                  width="572"
                  height="800"
                  xlink:href="images/concernArea.png"
                ></image>
                <g class="hover_group" opacity="0">
                  <rect
                    x="88"
                    y="74"
                    fill="#fff"
                    opacity="0"
                    width="377"
                    height="161"
                    onclick="selectConcernArea('forehead')"
                  ></rect>
                </g>
                <g class="hover_group" opacity="0">
                  <rect
                    x="92"
                    y="345"
                    fill="#fff"
                    opacity="0"
                    width="140"
                    height="53"
                    onclick="selectConcernArea('undereye')"
                  ></rect>
                </g>
                <g class="hover_group" opacity="0">
                  <rect
                    x="337"
                    y="333"
                    fill="#fff"
                    opacity="0"
                    width="146"
                    height="65"
                    onclick="selectConcernArea('undereye')"
                  ></rect>
                </g>
                <g class="hover_group" opacity="0">
                  <rect
                    x="248"
                    y="308"
                    fill="#fff"
                    opacity="0"
                    width="76"
                    height="148"
                    onclick="selectConcernArea('nose')"
                  ></rect>
                </g>
                <g class="hover_group" opacity="0">
                  <rect
                    x="90"
                    y="401"
                    fill="#fff"
                    opacity="0"
                    width="126"
                    height="143"
                    onclick="selectConcernArea('cheeks')"
                  ></rect>
                </g>
                <g class="hover_group" opacity="0">
                  <rect
                    x="345"
                    y="401"
                    fill="#fff"
                    opacity="0"
                    width="128"
                    height="143"
                    onclick="selectConcernArea('cheeks')"
                  ></rect>
                </g>
                <g class="hover_group" opacity="0">
                  <rect
                    x="202"
                    y="595"
                    fill="#fff"
                    opacity="0"
                    width="160"
                    height="70"
                    onclick="selectConcernArea('chin')"
                  ></rect>
                </g>
                <g class="hover_group" opacity="0">
                  <rect
                    x="180"
                    y="700"
                    fill="#fff"
                    opacity="0"
                    width="210"
                    height="50"
                    onclick="selectConcernArea('neck')"
                  ></rect>
                </g>
              </svg>
            </figure>
          </div>

          <div div style="flex: 1; padding-top:20px; padding-right: 50px">
            <h2>Areas:</h2>
            <!-- This is the container where the list will be displayed -->
            <ul id="stringList"></ul>
          </div>
        </div>
        <button onclick="goToPreviousQuestion()" class="btnBack">&larr; Go Back</button>
        <button onclick="submitSelectedConcernAreas()" class="btnNext">Proceed &#8594;</button>

        <!-- Dot container under each question -->
        <div class="dot-container" id="dotArea"></div>
      </div>

      <!-- Question: Sunscreen Use -->
      <div id="questionSunscreenUse" class="question" style="display: none">
        <label for="sunscreenUseSelect">What is your sunscreen use?</label>
        <select
          id="sunscreenUseSelect"
          name="sunscreenUseSelect"
          onchange="filterProducts('sunscreenUse', this.value)"
        >
          <option value="">Select...</option>
          <option value="frequently">Frequently</option>

          <option value="rarely">Rarely</option>
        </select>
        <button onclick="goToPreviousQuestion()" class="btnBack">&larr; Go Back</button>
        <!-- Dot container under each question -->
        <div class="dot-container" id="dotSunscreen"></div>
      </div>

      <!-- Question: Skincare Routine Complexity -->
      <div
        id="questionRoutineComplexity"
        class="question"
        style="display: none"
      >
        <label for="routineComplexitySelect">
          How committed are you in your skincare routine?
        </label>
        <select
          id="routineComplexitySelect"
          name="routineComplexitySelect"
          onchange="filterProducts('routineComplexity', this.value)"
        >
          <option value="">Select...</option>
          <option value="hero">Slightly Committed - Hero</option>
          <option value="essentials">Committed - Essentials</option>
          <option value="advanced">Very Committed - Advanced</option>
        </select>

        <div>
          <button class="modal-trigger" data-modal-content="level">
            What do these commitment levels mean?
          </button> 
        </div>

        <button onclick="goToPreviousQuestion()" class="btnBack">&larr; Go Back</button>
        <!-- Dot container under each question -->
        <div class="dot-container" id="dotComplexity"></div>
      </div>

      <!-- End of Questions -->
    </div>
    <div id="suggestionResult" style="display: none">
      <h3>Your perfect skincare routine:</h3>

      <!-- Hero Section -->
      <div id="heroSection" style="display: none">
        <div style="text-align: center; margin: 20px">
          <h2 class="title-large">Hero Product</h2>
          <div
            id="heroContainer"
          >
            <a href="" target="_blank" id="heroProductLink">
              <img
                id="heroProductImage"
                src=""
                alt="Hero Product"
              />
            </a>
            <div
              id="heroProductDetails"
              style="text-align: left; max-width: 400px"
              \
              class="hero-product-details"
            ></div>
          </div>
        </div>
      </div>

      <!-- Essentials Section -->
      <div id="essentialsSection" style="display: none">
        <h2 class="title-large">Essentials</h2>
        <div class="essentials-container">
          <div id="essentials1" class="essentials-item">
            <a href="" target="_blank" id="essentials1ProductLink">
              <img id="essentials1ProductImage" src="" alt="Essentials Product 1" class="product-image" />
            </a>
          </div>
          <div id="essentials2" class="essentials-item">
            <a href="" target="_blank" id="essentials2ProductLink">
              <img id="essentials2ProductImage" src="" alt="Essentials Product 2" class="product-image" />
            </a>
          </div>
          <div id="essentials3" class="essentials-item">
            <a href="" target="_blank" id="essentials3ProductLink">
              <img id="essentials3ProductImage" src="" alt="Essentials Product 3" class="product-image" />
            </a>
          </div>
        </div>
      </div>

      <!-- Advanced Section -->
      <div id="advancedSection" style="display: none">
        <h2 class="title-large">Advanced</h2>
        <div class="advanced-container">
          <div id="advanced1" class="advanced-item">
            <a href="" target="_blank" id="advanced1ProductLink">
              <img id="advanced1ProductImage" src="" alt="Advanced Product 1" class="product-image" />
            </a>
          </div>
          <div id="advanced2" class="advanced-item">
            <a href="" target="_blank" id="advanced2ProductLink">
              <img id="advanced2ProductImage" src="" alt="Advanced Product 2" class="product-image" />
            </a>
          </div>
          <div id="advanced3" class="advanced-item">
            <a href="" target="_blank" id="advanced3ProductLink">
              <img id="advanced3ProductImage" src="" alt="Advanced Product 3" class="product-image" />
            </a>
          </div>
          <div id="advanced4" class="advanced-item">
            <a href="" target="_blank" id="advanced4ProductLink">
              <img id="advanced4ProductImage" src="" alt="Advanced Product 4" class="product-image" />
            </a>
          </div>
          <div id="advanced5" class="advanced-item">
            <a href="" target="_blank" id="advanced5ProductLink">
              <img id="advanced5ProductImage" src="" alt="Advanced Product 5" class="product-image" />
            </a>
          </div>
          <div id="advanced6" class="advanced-item">
            <a href="" target="_blank" id="advanced6ProductLink">
              <img id="advanced6ProductImage" src="" alt="Advanced Product 6" class="product-image" />
            </a>
          </div>
          <div id="advanced7" class="advanced-item">
            <a href="" target="_blank" id="advanced7ProductLink">
              <img id="advanced7ProductImage" src="" alt="Advanced Product 7" class="product-image" />
            </a>
          </div>
          <div id="advanced8" class="advanced-item">
            <a href="" target="_blank" id="advanced8ProductLink">
              <img id="advanced8ProductImage" src="" alt="Advanced Product 8" class="product-image" />
            </a>
          </div>
        </div>
      </div>

    <script>

      function generateDots(containerId, numDark) {
        const container = document.getElementById(containerId);
        container.innerHTML = "";

        for (let i = 0; i < numDark; i++) {
          let dot = document.createElement("span");
          dot.classList.add("dotdark");
          container.appendChild(dot);
        }

        for (let i = 0; i < 13 - numDark; i++) {
          let dot = document.createElement("span");
          dot.classList.add("dotlight");
          container.appendChild(dot);
        }
      }

      generateDots("dotConcern", 0);
      generateDots("dotAcne", 0);
      generateDots("dotSeverity", 0);
      generateDots("dotUK", 1);
      generateDots("dot25", 2);
      generateDots("dotVitC", 3);
      generateDots("dotAllergy", 4);
      generateDots("dotPrescription", 5);
      generateDots("dotRetinoid", 6);
      generateDots("dotIrritation", 7);
      generateDots("dotSkinType", 8);
      generateDots("dotSensitivity", 9);
      generateDots("dotArea", 10);
      generateDots("dotSunscreen", 11);
      generateDots("dotComplexity", 12);

      document.addEventListener("DOMContentLoaded", function () {

        let navigationStack = []; // This will store the IDs of the questions as the user navigates through them.

        let rountineSize = 0;

        /* legacy codes
        let initialProductPool = [
          "Oil Control Serum",
          "Oil Control Pads",
          "Blemish Control Pen",
          "Hypo21 Purifying Skin Spray",
          "Phenomenal Eye Cream",
          "SPF 50 sunscreen FTT Skin Clinics Protect",
          "Vitamin C Serum 10%",
          "Vitamin C Serum 20%",
          "Prepare – Cleansing Lotion",
          "Quench Advanced Hyaluronic Serum",
          "Calm Night Cream",
          "Clear Advanced Gel Cleanser",
          "Thrive Menopausal Skin Serum",
          "Eye Lift Gel - Refine",
          "Daily Cleanser",
          "Foaming Wash - Reveal",
          "Luxury Exfoliator Cleanser",
          "Neck Firming Cream - Lift",
          "Endurance Moisturiser - FTT H2O",
          "Rejuvenating Serum - Rejuvenate",
          "Retinol Serum - FTT Skin Clinics R+",
          "Skin Brightening Serum - Illuminate",
          "Night Cream - Recover",
          "Purify Micellar Water",
          "Hydrating Lip Balm",
          "FTT Signature Lip Duo - lip balm and plumper kit",
          "Obagi Foaming Cleanser",
          "Obagi Hydrate Facial Moisturiser",
          "Obagi Hydro Drops Facial Serum",
          "Obagi Professional-C Microdermabrasion Polish Mask",
          "Obagi 360 Exfoliating Cleanser",
          "Obagi 360 Hydrofactor SPF 30",
          "Obagi 360 system",
          "Obagi ELASTIderm Eye Cream",
          "Obagi ELASTIderm Eye Serum",
          "Obagi ELASTIderm Facial Serum",
          "Obagi Hydrate Luxe Facial Moisturiser",
          "Obagi Daily Intensive Repair",
          "Obagi Nu-Derm Foaming Gel",
          "Obagi Nu-Derm 1 Gentle Cleanser",
          "Obagi Nu-Derm Toner",
          "Obagi Nu-Derm Exfoderm",
          "Obagi Nu-Derm Exfoderm Forte",
          "Obagi Professional-C Peptide Complex",
          "Obagi Retinol 0.5 Cream",
          "Obagi Retivance Skin Rejuvenating Complex",
          "Obagi Sun Shield Cool",
          "Obagi Sun Shield Matte",
          "Obagi Sun Shield Warm",
          "Obagi Vitamin C Serum 10%",
          "Obagi Vitamin C Serum 15%",
          "Obagi Vitamin C Serum 20%",
          "Obagi-C Rx Balancing Toner",
          "Obagi-C Rx Exfoliating Day Lotion",
          "Obagi-C Rx Cleaning Gel",
        ];

        */ 

        let spotProneProductPool = [
          "Oil Control Pads",
          "Clear Advanced Gel Cleanser",
          "Oil Control Serum",
          "Retinol Serum - FTT Skin Clinics R+",
          "Foaming Wash - Reveal",
          "Quench Advanced Hyaluronic Serum",
          "Hypo21 Purifying Skin Spray",
          /*
          "Obagi Nu-Derm Foaming Gel",
          "Obagi Foaming Cleanser",
          "Obagi Hydrate Luxe Facial Moisturiser",
          "Vitamin C Serum 10%",
          "Obagi 360 Hydrofactor SPF 30",
          "Blemish Control Pen",
          */
        ];

        let dryDehydratedProductPool = [
          "Quench Advanced Hyaluronic Serum",
          "Endurance Moisturiser - FTT H2O",
          "Night Cream - Recover",
          "SPF 50 sunscreen FTT Skin Clinics Protect",
          "Prepare – Cleansing Lotion",
          "Vitamin C Serum 10%",
          "Thrive Menopausal Skin Serum",
          /*
          "Obagi Hydrate Luxe Facial Moisturiser",
          "Obagi Nu-Derm 1 Gentle Cleanser",
          "Obagi Hydro Drops Facial Serum",
          */
        ];

        let unevenSkinToneProductPool = [
          "Skin Brightening Serum - Illuminate",
          "Vitamin C Serum 20%",
          "SPF 50 sunscreen FTT Skin Clinics Protect",
          "Foaming Wash - Reveal",
          "Rejuvenating Serum - Rejuvenate",
          "Quench Advanced Hyaluronic Serum",
          "Luxury Exfoliator Cleanser",
          /*
          "Obagi Professional-C Peptide Complex",
          "Obagi-C Rx Exfoliating Day Lotion",
          "Obagi-C Rx Cleaning Gel",
          "Obagi Professional-C Microdermabrasion Polish Mask",
          "Obagi Hydrate Luxe Facial Moisturiser",
          */
        ];

        let maturingProductPool = [
          "Retinol Serum - FTT Skin Clinics R+",
          "Foaming Wash - Reveal",
          "Vitamin C Serum 20%",
          "Rejuvenating Serum - Rejuvenate",
          "Neck Firming Cream - Lift",
          "Endurance Moisturiser - FTT H2O",
          "Skin Brightening Serum - Illuminate",
          "SPF 50 sunscreen FTT Skin Clinics Protect",
          "Phenomenal Eye Cream",
          "Luxury Exfoliator Cleanser",
          /*
          "Obagi ELASTIderm Facial Serum",
          "Obagi ELASTIderm Eye Serum",
          "Obagi ELASTIderm Eye Cream",
          "Obagi Hydrate Luxe Facial Moisturiser",
          */
        ];

        let rosaceaProductPool = [
          "Calm Night Cream",
          "Vitamin C Serum 10%",
          "Quench Advanced Hyaluronic Serum",
          "Thrive Menopausal Skin Serum",
          "SPF 50 sunscreen FTT Skin Clinics Protect",
          "Prepare – Cleansing Lotion",
          "Hypo21 Purifying Skin Spray",
          /*
          "Obagi Rebalance",
          "Obagi Nu-Derm 1 Gentle Cleanser",
          "Obagi Hydrate Facial Moisturiser",
          "Obagi Professional-C Peptide Complex",
          "Obagi Vitamin C Serum 15%",
          */
        ];

        let improvementsProductPool = [
          "Foaming Wash - Reveal",
          "Vitamin C Serum 20%",
          "SPF 50 sunscreen FTT Skin Clinics Protect",
          "Retinol Serum - FTT Skin Clinics R+",
          "Luxury Exfoliator Cleanser",
          /*
          "Obagi Nu-Derm 1 Gentle Cleanser",
          "Obagi Hydrate Luxe Facial Moisturiser",
          "Obagi Professional-C Peptide Complex",
          "Hypo21 Purifying Skin Spray",
          "Obagi 360 Exfoliating Cleanser",
          */
        ];

        // Modals
        const modalContents = {
          skinConcern:
          `
            <h2>Which skin concern is my priority?</h2>
              <h3>Dry/Dehydrated</h3>
                <p>If your facial skin is rough, flaky, or thirsty, we can help rehydrate, rebuild barrier function and prevent dry skin from taking over.</p>
              <h3>Spot-Prone</h3>
                <p>Acne is a skin condition where your pores are blocked with sebum, bacteria, and dead skin cells, and we can help provide a smoother skin for you.</p>
              <h3>Maturing</h3>
                <p>If you're noticing fine lines or deeper wrinkles, we can help reduce their appearance and prevent new ones from forming with targeted treatments.</p>
              <h3>Rosacea/Sensitive</h3>
                <p>A long-term skin condition where you have redness across your face that may feel hot or painful. Our treatments can help with symptoms.</p>
              <h3>Uneven Skin Tones</h3>
                <p>Dark spots and hyperpigmentation can result from sun damage, acne scars, or hormonal changes. Our solutions aim to brighten and even out your skin tone.</p>
              <h3>Improvements</h3>
                <p>This option is for those looking to improve their skin appearance and achieve the long-lasting glow.</p>
          `,
          level:
          `
            <h2>Which level of commitment should you choose?</h2>
              <h3>Slightly Committed - Hero</h3>
                <p>Your ultimate go-to product, carefully selected to deliver maximum impact with minimal effort.</p>
              <h3>Commited - Essentials</h3>
                <p>A power trio of expertly chosen products that work in harmony to elevate your skincare.</p>
              <h3>Very Committed - Advanced</h3>
                <p>The ultimate skincare experience meticulously curated to provide the perfect synergy for radiant and healthy skin.</p>
          `,
          severity:
          `
            <h2>What do these severity levels mean?</h2>
              <h3>Mild</h3>
                <p>Occasional breakouts with small, surface-level blemishes like blackheads and whiteheads. Skin may appear slightly congested, but inflammation is minimal.</p>
              <h3>Moderate</h3>
                <p>Frequent breakouts with a mix of blackheads, whiteheads, and inflamed red bumps (papules and pustules). Skin may feel more sensitive, and post-breakout marks can take longer to fade.</p>
              <h3>Severe</h3>
                <p>Persistent, deep, and painful acne, including large cysts and nodules. This level of acne is often accompanied by significant redness, inflammation, and an increased risk of scarring.</p>
          `,
          acneType:
          `
            <h2> What is my acne type? <h2>
              <h3>Cystic</h3>
                <p>Inflammatory acne that causes painful, pus-filled pimples to form deep under the skin.</p>
              <h3>Blackheads</h3>
                <p>Open bumps on the skin that fill with excess sebum and dead skin cells.</p>
              <h3>Papules</h3>
                <p> Papules are solid, inflamed bumps in your skin that may be the same color as your skin or red, brown or purple.</p>
              <h3>Whiteheads</h3>
                <p>Oil and dead skin close off hair follicles or sebaceous glands and form a closed bump on your skin.</p>
          `,
        };

        const modal = document.getElementById("genericModal");
        const modalContent = document.getElementById("modalDynamicContent");
        const modalClose = document.querySelector("#genericModal .close");

        // Function to open the modal with dynamic content
        function openModal(contentKey) {
          modalContent.innerHTML = modalContents[contentKey];
          modal.style.display = "block";
        }

        function closeModal() {
          modal.style.display = "none";
        }

        modalClose.onclick = closeModal;

        window.onclick = function (event) {
          if (event.target == modal) {
            closeModal();
          }
        };

        document.querySelectorAll(".modal-trigger").forEach((button) => {
          button.addEventListener("click", function () {
            const contentKey = button.getAttribute("data-modal-content");
            openModal(contentKey);
          });
        });

        // first page t&c
        const checkbox = document.getElementById("termsCheckbox");
        const startButton = document.getElementById("startConsultationButton");
        const errorNotification = document.getElementById("errorMessageContainer");
        const startButtonDisabled = document.getElementById("startButtonDisabled");

        // Listen for changes to the checkbox
        checkbox.addEventListener("change", function () {
          if (checkbox.checked) {
            startButton.disabled = false;
            errorMessageContainer.style.display = "none"; // Hide error if previously shown
          } else {
            startButton.disabled = true;
          }
        });

        // Handle the start button click
        startButton.addEventListener("click", function () {
          if (checkbox.checked) {
            document.getElementById("welcomeScreen").style.display = "none";
            document.getElementById("questionsContainer").style.display = "flex"; // Proceed with starting the consultation
            document.getElementById("questionSkinConcern").style.display = "block"; // Start the questions
          }
        });


        startButton.addEventListener("mouseover", function () {
          if (!checkbox.checked) {
            errorMessageContainer.style.display = "block";
          }
        });

        // Map of all elimination lists by question type
        const eliminationLists = {
          basedUK: {
            yes: [],
            no: [], //out
          },
          overTwentyFive: {
            yes: [],
            no: [
              "Thrive Menopausal Skin Serum",
              "Eye Lift Gel - Refine",
              "Phenomenal Eye Cream",
              "Rejuvenating Serum - Rejuvenate",
              "Night Cream - Recover",
              "Retinol Serum - FTT Skin Clinics R+",
            ], // Exclude products with tag: tretinoin, retinol, retinoids Exclude anti-aging
          },
          skinConcern: {
            dryDehydrated: [
              "Oil Control Serum",
              "Oil Control Pads",
              "Blemish Control Pen",
              "Hypo21 Purifying Skin Spray",
              "Phenomenal Eye Cream",
              "Phenomenal Eyelash Serum",
              "SPF 50 sunscreen FTT Skin Clinics Protect",
              "Quench Advanced Hyaluronic Serum",
              "Calm Night Cream",
              "Clear Advanced Gel Cleanser",
              "Thrive Menopausal Skin Serum",
              "Daily Cleanser",
              "Neck Firming Cream - Lift",
              "Endurance Moisturiser - FTT H2O",
              "Rejuvenating Serum - Rejuvenate",
              "Retinol Serum - FTT Skin Clinics R+",
              "Night Cream - Recover",
              "Hydrating Lip Balm",
              "FTT Signature Lip Duo - lip balm and plumper kit",
              "Obagi Foaming Cleanser",
              "Obagi 360 system",
              "Obagi ELASTIderm Eye Cream",
              "Obagi ELASTIderm Eye Serum",
              "Obagi ELASTIderm Facial Serum",
              "Obagi Hydrate Luxe Facial Moisturiser",
              "Obagi Daily Intensive Repair",
              "Obagi Medical Cleansing Wipes",
              "Obagi NU-CIL Eyelash Serum",
              "Obagi Nu-Derm Foaming Gel",
              "Obagi Retinol 0.5 Cream",
              "Obagi Retivance Skin Rejuvenating Complex",
              "Obagi Sun Shield Cool",
              "Obagi Sun Shield Matte",
              "Obagi Sun Shield Warm",
              "Obagi Vitamin C Serum 15%",
              "Obagi Vitamin C Serum 20%",
              "Obagi-C Rx Balancing Toner",
              "Obagi CLENZIderm Daily Care Foaming Cleanser",
              "Prepare – Cleansing Lotion",
            ],
            acne: [
              "Hypo21 Purifying Skin Spray",
              "Phenomenal Eye Cream",
              "Phenomenal Eyelash Serum",
              "SPF 50 sunscreen FTT Skin Clinics Protect",
              "Quench Advanced Hyaluronic Serum",
              "Calm Night Cream",
              "Thrive Menopausal Skin Serum",
              "Daily Cleanser",
              "Neck Firming Cream - Lift",
              "Endurance Moisturiser - FTT H2O",
              "Rejuvenating Serum - Rejuvenate",
              "Night Cream - Recover",
              "Hydrating Lip Balm",
              "FTT Signature Lip Duo - lip balm and plumper kit",
              "Obagi Foaming Cleanser",
              "Obagi 360 system",
              "Obagi ELASTIderm Eye Cream",
              "Obagi ELASTIderm Eye Serum",
              "Obagi ELASTIderm Facial Serum",
              "Obagi Hydrate Luxe Facial Moisturiser",
              "Obagi Daily Intensive Repair",
              "Obagi Medical Cleansing Wipes",
              "Obagi NU-CIL Eyelash Serum",
              "Obagi Nu-Derm Foaming Gel",
              "Obagi Retivance Skin Rejuvenating Complex",
              "Obagi Sun Shield Cool",
              "Obagi Sun Shield Matte",
              "Obagi Sun Shield Warm",
              "Obagi Vitamin C Serum 15%",
              "Obagi Vitamin C Serum 20%",
              "Obagi-C Rx Balancing Toner",
              "Prepare – Cleansing Lotion",
            ],
            wrinklesFinelines: [
              "Oil Control Serum",
              "Oil Control Pads",
              "Blemish Control Pen",
              "Hypo21 Purifying Skin Spray",
              "Phenomenal Eye Cream",
              "Phenomenal Eyelash Serum",
              "SPF 50 sunscreen FTT Skin Clinics Protect",
              "Quench Advanced Hyaluronic Serum",
              "Calm Night Cream",
              "Clear Advanced Gel Cleanser",
              "Thrive Menopausal Skin Serum",
              "Daily Cleanser",
              "Endurance Moisturiser - FTT H2O",
              "Hydrating Lip Balm",
              "FTT Signature Lip Duo - lip balm and plumper kit",
              "Obagi Foaming Cleanser",
              "Obagi 360 system",
              "Obagi Hydrate Luxe Facial Moisturiser",
              "Obagi Daily Intensive Repair",
              "Obagi Medical Cleansing Wipes",
              "Obagi NU-CIL Eyelash Serum",
              "Obagi Nu-Derm Foaming Gel",
              "Obagi Sun Shield Cool",
              "Obagi Sun Shield Matte",
              "Obagi Sun Shield Warm",
              "Obagi Vitamin C Serum 15%",
              "Obagi Vitamin C Serum 20%",
              "Obagi-C Rx Balancing Toner",
              "Prepare – Cleansing Lotion",
            ],
            rosacea: [
              "Oil Control Serum",
              "Oil Control Pads",
              "Blemish Control Pen",
              "Hypo21 Purifying Skin Spray",
              "Phenomenal Eye Cream",
              "Phenomenal Eyelash Serum",
              "SPF 50 sunscreen FTT Skin Clinics Protect",
              "Quench Advanced Hyaluronic Serum",
              "Calm Night Cream",
              "Clear Advanced Gel Cleanser",
              "Thrive Menopausal Skin Serum",
              "Daily Cleanser",
              "Neck Firming Cream - Lift",
              "Endurance Moisturiser - FTT H2O",
              "Rejuvenating Serum - Rejuvenate",
              "Hydrating Lip Balm",
              "FTT Signature Lip Duo - lip balm and plumper kit",
              "Obagi Foaming Cleanser",
              "Obagi 360 system",
              "Obagi ELASTIderm Eye Cream",
              "Obagi ELASTIderm Eye Serum",
              "Obagi ELASTIderm Facial Serum",
              "Obagi Hydrate Luxe Facial Moisturiser",
              "Obagi Daily Intensive Repair",
              "Obagi Medical Cleansing Wipes",
              "Obagi NU-CIL Eyelash Serum",
              "Obagi Nu-Derm Foaming Gel",
              "Obagi Retinol 0.5 Cream",
              "Obagi Retivance Skin Rejuvenating Complex",
              "Obagi Sun Shield Cool",
              "Obagi Sun Shield Matte",
              "Obagi Sun Shield Warm",
              "Obagi Vitamin C Serum 15%",
              "Obagi Vitamin C Serum 20%",
              "Obagi-C Rx Balancing Toner",
              "Obagi-C Rx Exfoliating Day Lotion",
              "Obagi CLENZIderm Daily Care Foaming Cleanser",
              "Prepare – Cleansing Lotion",
            ],
            unevenSkinTone: [
              "Oil Control Serum",
              "Oil Control Pads",
              "Blemish Control Pen",
              "Hypo21 Purifying Skin Spray",
              "Phenomenal Eyelash Serum",
              "SPF 50 sunscreen FTT Skin Clinics Protect",
              "Quench Advanced Hyaluronic Serum",
              "Calm Night Cream",
              "Clear Advanced Gel Cleanser",
              "Thrive Menopausal Skin Serum",
              "Daily Cleanser",
              "Neck Firming Cream - Lift",
              "Endurance Moisturiser - FTT H2O",
              "Rejuvenating Serum - Rejuvenate",
              "Hydrating Lip Balm",
              "FTT Signature Lip Duo - lip balm and plumper kit",
              "Obagi 360 system",
              "Obagi ELASTIderm Eye Cream",
              "Obagi ELASTIderm Eye Serum",
              "Obagi ELASTIderm Facial Serum",
              "Obagi Hydrate Luxe Facial Moisturiser",
              "Obagi Daily Intensive Repair",
              "Obagi Medical Cleansing Wipes",
              "Obagi NU-CIL Eyelash Serum",
              "Obagi Nu-Derm Foaming Gel",
              "Obagi Retinol 0.5 Cream",
              "Obagi Sun Shield Cool",
              "Obagi Sun Shield Matte",
              "Obagi Sun Shield Warm",
              "Obagi Vitamin C Serum 15%",
              "Obagi Vitamin C Serum 20%",
              "Obagi CLENZIderm Daily Care Foaming Cleanser",
            ],
            improvements: [],
          },
          wrinklesFinelines: {
            finelines: [],
            wrinkles: [],
            both: [],
          },
          typeOfHyperpigmentation: {
            darkSpots: [],
            melasma: [],
            undereyeDarkness: [
              "Purify Micellar Water",
              "Obagi Nu-Derm Toner",
              "Obagi Nu-Derm Exfoderm",
              "Obagi Nu-Derm Exfoderm Forte",
              "Vitamin C Serum 10%",
              "Vitamin C Serum 20%",
            ],
          },
          typeOfAcne: {
            blackhead: [],
            cystic: [],
            papules: [],
            whiteheads: [],
          },
          severityOfAcne: {
            mild: [
              "Clear Advanced Gel Cleanser",
              "Obagi CLENZIderm Daily Care Foaming Cleanser",
              "Retinol Serum - FTT Skin Clinics R+",
              "Obagi Hydrate Facial Moisturiser",
              "Obagi Retivance Skin Rejuvenating Complex",
            ],
            moderate: [
              "Blemish Control Pen",
              "Obagi Retinol 0.5 Cream",
              "Obagi Hydrate Facial Moisturiser",
              "Obagi Retivance Skin Rejuvenating Complex",
            ],
            severe: [], // is an out
          },
          usesVitaminC: {
            yes: [],
            no: ["Vitamin C Serum 20%"],
          },
          allergy: {
            niacinamide: ["Calm Night Cream"],
            retinolRetinoids: [
              "Obagi Retinol 0.5 Cream",
              "Retinol Serum - FTT Skin Clinics R+",
              "Vitamin C Serum 20%",
              "Night Cream - Recover",
              "Obagi Medical Cleansing Wipes",
              "Obagi Retivance Skin Rejuvenating Complex",
            ],
            salicylicAcid:[
              "Oil Control Pads",
              "Oil Control Serum",
              "Clear Advanced Gel Cleanser",
              "Retinol Serum - FTT Skin Clinics R+",
              "Obagi Foaming Cleanser",
              "Blemish Control Pen"
            ],
            azelaicAcid: ["Skin Brightening Serum - Illuminate"],
            fragrances: [], // out “most of our products contain mild natural fragrances”
            none: [],
          },
          takePrescription: {
            yes: [], // out “sorry the active in skincare products can cause irritation if not discussed first with a medical professional, please try again when you are no longer using topical prescriptions”
            no: [],
          },
          retinoidUse: {
            yes: [],
            no: [],
          },
          retinoidIrritation: {
            yes: [
              "Obagi Retinol 0.5 Cream",
              "Retinol Serum - FTT Skin Clinics R+",
              "Night Cream - Recover",
              "Obagi Medical Cleansing Wipes",
              "Obagi Retivance Skin Rejuvenating Complex",
            ],
            no: [],
          },
          skinType: {
            normal: [
              "Oil Control Pads",
              "Oil Control Serum",
              "Obagi Nu-Derm Exfoderm",
            ],
            combination: ["Obagi Nu-Derm Exfoderm"],
            dry: [
              "Clear Advanced Gel Cleanser",
              "Obagi Nu-Derm Exfoderm Forte",
            ],
            oily: [
              "Endurance Moisturiser - FTT H2O",
              "SPF 50 sunscreen FTT Skin Clinics Protect",
              "Obagi Nu-Derm Exfoderm",
            ],
          },
          skinSensitivity: {
            yes: [
              "Vitamin C Serum 20%",
              "Obagi Vitamin C Serum 20%",
              "Clear Advanced Gel Cleanser",
              "Obagi Nu-Derm Exfoderm Forte",
              "Obagi Professional-C Microdermabrasion Polish Mask",
              "Retinol Serum - FTT Skin Clinics R+",
              "Clear Advanced Gel Cleanser",
              "Rejuvenating Serum - Rejuvenate",
              "Obagi-C Rx Balancing Toner",
            ],
            no: [],
          },
          concernArea: {
            undereye: [],
            nose: [],
            jaw: [],
            forehead: [],
            cheeks: [],
            chin: [],
            undereyeWhiteList: [
              "Phenomenal Eye Cream",
              "Obagi ELASTIderm Eye Cream",
              "Obagi ELASTIderm Eye Serum",
              "Eye Lift Gel - Refine",
            ],
            neck:[],
            neckWhiteList: [
              "Neck Firming Cream - Lift",
            ],
          },
          sunscreenUse: {
            frequently: [
              "SPF 50 sunscreen FTT Skin Clinics Protect",
              "Obagi 360 Hydrofactor SPF 30",
              "Obagi Sun Shield Cool",
              "Obagi Sun Shield Matte",
              "Obagi Sun Shield Warm",
            ],
            rarely: [],
          },
          routineComplexity: {
            hero: [], //output 1 product
            essentials: [], // output top 3 products
            advanced: [], //output max products
          },
        };

        const productBlurbs = {
          "Oil Control Serum": {
            blurb:
              "FTT Skin Clinics Oil Control Serum deeply cleans pores, dissolving oil and debris to help prevent blemishes, breakouts, and uneven texture.",
            directions:
              "Apply liberally once or twice per day as required to entire area of concern.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2024/01/FTT_Oil_control_serum.webp",
            prodURL: "https://www.francesturnertraill.co.uk/shop/ftt-signature/ftt-oil-control-serum/",
          },
          "Oil Control Pads": {
            blurb:
              "Oil control pads combine salicylic and glycolic acids to deeply cleanse, reduce oil, prevent breakouts, exfoliate dead skin, and refine pores for a smoother complexion.",
            directions:
              "Clean skin thoroughly before use, use one pad daily and cover entire area of concern.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2024/01/FTT_Remove_Oil_Control_Pads.webp",
            prodURL: "https://www.francesturnertraill.co.uk/shop/ftt-signature/ftt-remove-oil-control-pads/",
          },
          "Blemish Control Pen": {
            blurb:
              "The blemish control pen uses a blend of acids and natural extracts to deeply unclog pores, target blemishes, and reduce inflammation and redness.",
            directions:
              "Apply one pen tip size amount to each area of concern and allow to absorb.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2024/01/FTT_Zap_Blemish_Control_Pen.webp",
            prodURL: "https://www.francesturnertraill.co.uk/shop/ftt-signature/ftt-zap-blemish-control-pen/",
          },
          "Hypo21 Purifying Skin Spray": {
            blurb:
              "HYPO21 purifying skin spray, featuring pure HOCl, boosts the immune response to help restore skin's natural state and is ideal for conditions like eczema, psoriasis, and acne.",
            directions:
              "Spray Hypo21 Purifying Skin Spray on freshly washed skin (Preferably After Shower) and leave for 60 seconds or so. There’s no need to rinse off. For best results, apply morning and evening on fresh, clean skin.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2023/05/Hypo21-Purifying-skin-spray-600x600.webp",
            prodURL: "https://www.francesturnertraill.co.uk/shop/skincare/hypo21-purifying-skin-spray/",
          },
          "SPF 50 sunscreen FTT Skin Clinics Protect": {
            blurb:
              "Prime & Protect SPF50 sunscreen contains clinically proven UVA and UVB filters to protect your skin from the damage that can be caused by radiation from sun exposure.",
            directions:
              "Apply liberally before exposure to the sun. Can be used as a moisturiser with or without makeup. Apply regularly. For external use only.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2017/07/FTT_SPF50_Sun_Screen.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/ftt-signature/spf50-sunscreen/",
          },
          "Vitamin C Serum 10%": {
            blurb:
              "A daily serum that brightens dull skin and offers antioxidant properties to protect against environmental damage and prevent signs of aging and sun damage.",
            directions:
              "Apply daily to cleansed skin before applying SPF or makeup, gently massage until fully absorbed. For external use only.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2023/12/FTT-C10-Vitamin-C-Serum.webp",
            prodURL: "https://www.francesturnertraill.co.uk/shop/ftt-signature/professional-vitamin-c-serum/",
          },
          "Vitamin C Serum 20%": {
            blurb:
              "Maximum Strength Vitamin C Serum 20% offers peak antioxidant benefits to prevent wrinkles, dark spots, and environmental damage while boosting collagen production to delay signs of aging.",
            directions:
              "Apply daily to cleansed skin before applying SPF or makeup, gently massage until fully absorbed. For external use only.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2019/01/FTT_Vitamin_C_Serum.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/ftt-signature/vitamin-c-serum-20/",
          },
          "Quench Advanced Hyaluronic Serum": {
            blurb:
              "Quench Advanced Hyaluronic Serum offers deep penetration and 72-hour hydration using the smallest hyaluronic acid molecules for enhanced moisture delivery and long-term skin rejuvenation.",
            directions:
              "Apply daily to cleansed skin before applying SPF or makeup, gently massage until fully absorbed. For external use only.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2021/05/FTT_Quench_Advanced_Hyaluronic_Acid_Serum.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/ftt-signature/quench-hyaluronic-serum/",
          },
          "Calm Night Cream": {
            blurb:
              "Calm night cream combines peptides, plant extracts, and hydrators like niacinamide and bakuchiol to stimulate collagen, enhance elasticity, reduce wrinkles, and deeply hydrate, delivering a rejuvenated, radiant complexion overnight.",
            directions:
              "Apply liberally at night as required to entire face after serum.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2023/09/FTT_Calm_Night_Cream.webp",
            prodURL: "https://www.francesturnertraill.co.uk/shop/ftt-signature/calim-night-cream/",
          },
          "Clear Advanced Gel Cleanser": {
            blurb:
              "Clear Advanced Gel Cleanser uses glycolic, salicylic, and lactic acids to exfoliate, reduce oiliness, and combat bacteria, leaving oily and spot-prone skin clear and less inflamed.",
            directions:
              "Use in the morning shower, massage into damp skin, leave for a few minutes, then rinse off thoroughly.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2021/11/Clear-Advanced-Gel-Cleanser-FTT.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/ftt-signature/clear-advanced-gel-cleanser/",
          },
          "Thrive Menopausal Skin Serum": {
            blurb:
              "This menopausal skin serum combines peptides and natural extracts to reduce redness, irritation, and sensitivity, enhance collagen and elastin production, and improve skin firmness, addressing the specific challenges of menopausal skin changes.",
            directions:
              "Apply liberally once per day as required to entire area of concern.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2023/09/FTT_Thrive_Menopause_Skin_Serum.webp",
            prodURL: "https://www.francesturnertraill.co.uk/shop/ftt-signature/thrive-menopausal-skin-serum/",
          },
          "Eye Lift Gel - Refine": {
            blurb:
              "Eye Lift Gel - Refine helps promote the creation of healthy, youthful-looking skin. With caffeine and licorice root, this rich lightweight gel cream also aids in brightening the under-eye complexion and reducing the appearance of dark circles. The appearance of eye bags and crow’s feet will be reduced, and the entire eye area will be brighter, more illuminated.",
            directions:
              "Apply daily to cleansed skin to areas of concern, massaging until fully absorbed.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2017/07/FTT_Refine_Eye_Lift_Gel.webp",
            prodURL: "https://www.francesturnertraill.co.uk/shop/ftt-signature/refine-intensive-eye-serum/",
          },
          "Phenomenal Eye Cream": {
            blurb:
              "A rich, luxurious Eye Cream packed with natural antioxidants including Green Tea, Pomegranate and Ginseng to help reduce the appearance of eye bags and dark circles. This eye will help to achieve an even skin tone under the eye as well as reducing the appearance of fine lines and wrinkles around your eye area.",
            directions:
              "Apply a pea size amount of our Phenomenal Eye Cream to the eye area above and below your eye.",
            imgURL: "",
            prodURL: "https://www.francesturnertraill.co.uk/shop/be-phenomenal/phenomenal-eye-cream/",
          },
          "Obagi ELASTIderm Eye Cream": {
            blurb:
              "Obagi Elastiderm Eye cream is clinically proven to help reduce the appearance of eye area fine lines and wrinkles.",
            directions:
              "After cleansing skin, gently apply small dots of the ELASTIderm Eye Cream around the eye area.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/04/OBAGI_Elastiderm_Eye_Cream_UK.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-elastiderm-eye-cream/",
          },
          "Obagi ELASTIderm Eye Serum": {
            blurb:
              "ELASTIderm Eye Serum is energizing and formulated with a combination of Caffeine and Bi-Mineral Contour Complex™ to support skin elasticity and reduce the appearance of under-eye puffiness. For refreshed, tighter-looking skin.",
            directions:
              "After cleansing skin, gently roll ELASTIderm Eye Serum on the outside and underneath the eye area. For best results, apply twice daily, in the morning and at night.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/01/OBAGI_Elastiderm_Eye_Serum_UK.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-elastiderm-eye-serum/",
          },
          "Daily Cleanser": {
            blurb:
              "Prepare Cleansing Lotion is a soothing cleanser containing natural fruit extracts and clinically proven amino acids to calm your skin whilst providing deep cleansing to remove pollutants, excess oil and makeup. Leaving your skin ready for any serums and lotion.",
            directions:
              "Apply to damp skin, gently massage and then remove with a damp cloth or in the shower. Rinse well and pat to dry before applying serum and moisturiser.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2017/07/FTT_Daily_Cleanser.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/ftt-signature/daily-cleanser/",
          },
          "Prepare – Cleansing Lotion": {
            blurb:
              "Prepare Daily Cleanser gently cleanses and calms skin, removes pollutants and makeup, and provides antioxidant protection to prevent signs of aging, enhancing skin's natural glow and promoting a smoother, healthier complexion.",
            directions:
              "Apply to damp skin, massage gently and remove with a damp cloth or in the shower. Rinse well and pat dry.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2017/07/FTT_Daily_Cleanser.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/ftt-signature/daily-cleanser/",
          },
          "Foaming Wash - Reveal": {
            blurb:
              "Reveal Foaming Wash uses Alpha-Hydroxy acids and Aloe Vera to cleanse, exfoliate, and calm skin, enhancing radiance and preparing it for further skincare treatments.",
            directions:
              "Gently massage one pump onto damp skin and leave for a few minutes for maximum results, before rinsing with warm water. Gentle enough to use twice daily.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2017/07/FTT_Foaming_Wash.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/skincare-products/ftt-signature/foaming-wash/",
          },
          "Luxury Exfoliator Cleanser": {
            blurb:
              "A luxury anti-aging wash containing glycolic acid and quartz, exfoliates and polishes skin, enhancing smoothness and radiance.",
            directions:
              "Use after cleansing twice a week. Massage a small amount onto dry skin in light circular movements for 2/3 minutes, re-activating with water when necessary, avoiding direct eye contact. Ensure the whole face has been covered. Rinse off with tepid water, pat dry.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2019/05/FTT-Exfoliate.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/ftt-signature/luxury-exfoliator-cleanser/",
          },
         "Neck Firming Cream - Lift": {
            blurb:
              "Lift Next Generation Neck Firming Cream is a daily anti-aging treatment that firms, lifts, and evens skin tone on the neck and décolletage.",
            directions:
              "Apply as required to cleansed, dry neck and décolletage area. Massage until fully absorbed.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2019/07/FTT-Neck-Firming-Cream-uk.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/ftt-signature/lift-neck-firming-cream/",
          },
          "Endurance Moisturiser - FTT H2O": {
            blurb:
              "H2∞ is a luxurious silky moisturiser that hydrates and maintains optimal skin condition using peptides to stimulate collagen, tara seed extract to boost moisture levels, and vitamins to protect and restore the skin's natural barrier.",
            directions: "Apply to clean skin on face and neck as required.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2019/01/FTT_Moisturiser.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/ftt-signature/endurance-moisturiser/",
          },
          "Rejuvenating Serum - Rejuvenate": {
            blurb:
              "Rejuvenate Active Serum, infused with Alpha-Hydroxy acids, peptides, and Aloe Vera, gently enhances cell renewal, controls breakouts, and diminishes pigmentation and fine lines for a fresher, younger appearance.",
            directions:
              "Using fingertips, gently massage one pump onto cleansed face. Can be smoothed all over face or applied to targeted areas.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2017/07/FTT_Rejuvenate_Active_Serum.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/ftt-signature/rejuvenating-serum/",
          },
          "Retinol Serum - FTT Skin Clinics R+": {
            blurb:
              "A powerful and highly effective serum clinically proven to increase cell turnover. R+ will reduce pore size, resulting in firmer younger looking skin as well as reduce, visible signs of ageing including pigmentation and uneven skin tone.",
            directions:
              "Apply to clean skin at night. Use as directed by your skincare specialist. It is important to use sunscreen when using a retinol cream, as retinol increases the skin’s sensitivity to sun exposure.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2019/01/FTT_Retinol_serum.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/ftt-signature/retinol-serum/",
          },
          "Skin Brightening Serum - Illuminate": {
            blurb:
              "This lightweight, fragrance-free skin brightening serum reduces melanin production, evens skin tone, improves texture, lightens appearance, and diminishes fine lines and wrinkles by boosting collagen, elastin, and hyaluronic acid production.",
            directions:
              "Use at night. Apply liberally to areas of concern, avoiding direct eye contact. Use an SPF product during the day.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2019/07/Illuminate-skin-brightening-serum.webp",
            prodURL: "https://www.francesturnertraill.co.uk/shop/ftt-signature/skin-brightening-serum/",
          },
          "Night Cream - Recover": {
            blurb:
              "Recover Night Cream contains active peptides and retinol to help repair your skin to increase cell turnover to renew and hydrate your skin while you sleep.",
            directions:
              "Before bedtime apply a small amount to your skin and massage for a few minutes after cleansing.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2017/07/FTT_Night_Cream.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/ftt-signature/recover-night-cream/",
          },
          "Obagi Foaming Cleanser": {
            blurb:
              "Obagi CLENZIderm Foaming Cleanser, featuring 2% salicylic acid and menthol, deeply cleans pores without over-drying, removes impurities, and provides cooling relief, making it ideal for those with acne.",
            directions:
              "Dispense a small amount of cleanser, massage over the face with warm water, rinse thoroughly, and pat dry; start with once daily, increasing as tolerated, and adjust frequency if dryness occurs.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/01/OBAGI_CLENZIderm_Foaming_Cleanser_UK-600x600.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-foaming-cleanser/",
          },
          "Obagi Hydrate Facial Moisturiser": {
            blurb:
              "Obagi Hydrate provides instant, long-lasting hydration for essential moisturisation and rejuvenation, using innovative technologies and naturally derived ingredients. These moisturisers are non-irritating and designed for a variety of skin types to help enhance your skin.",
            directions:
              "Apply to face in the morning and evening or as needed.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/02/OBAGI_Hydrate_Facial_Moisturizer_UK.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-hydrate-facial-moisturiser/",
          },
          "Obagi Hydro Drops Facial Serum": {
            blurb:
              "Obagi Hydro Drops is an innovative hydrator that revitalizes dull skin with Abyssinian and Hibiscus oils, supports the skin's natural barrier, offers immediate smoothing and hydration all day. It also reduces fine lines and wrinkles over time.",
            directions:
              "Apply several drops on to your finger tips and apply to clean, dry skin every morning before your usual routine.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/05/Obagi_Daily_Hydro_Drops_Facial_Serum_uk.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-hydro-drops-facial-serum/",
          },
          "Obagi Professional-C Microdermabrasion Polish Mask": {
            blurb:
              "This new multi-tasking polish + mask features unique is designed to exfoliate and prep your skin for the absorption of vitamin C, helping to smooth skin texture, increase radiance, and reduce the appearance of fine lines and wrinkles.",
            directions:
              "Apply a thin layer to clean, damp skin, avoid the eyes, leave for 10-15 minutes, expect a tingling sensation, then wipe off and rinse with warm water; use 2 to 3 times weekly.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/04/OBAGI_Professional-C_Microdermabrasion_Polish_Mask_UK.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-professional-c-microdermabrasion-polish-mask/",
          },
          "Obagi 360 Exfoliating Cleanser": {
            blurb:
              "Obagi360 Exfoliating Cleanser works to help clear dull, dry skin that can lead to clogged pores and uneven skin texture.",
            directions:
              "Wet hands and face, apply cleanser in circular motions, rinse with lukewarm water, pat dry, and use twice daily, morning and evening.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/04/OBAGI360_Exfoliating_Cleanser_uk.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-360-exfoliating-cleanser/",
          },
          "Obagi 360 Hydrofactor SPF 30": {
            blurb:
              "A dual-function moisturiser with soothing ingredients and broad-spectrum protection thus preventing skin damage caused by UVA/UVB rays.",
            directions:
              "Apply liberally 15 minutes before sun exposure and as needed.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/04/OBAGI360_Hydrafactor_SPF30-UK.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-360-hydrafactor-spf30/",
          },
          "Obagi ELASTIderm Facial Serum": {
            blurb:
              "Obagi ELASTIderm Facial Serum with patented Bi-Mineral Contour ComplexTM helps support skin elasticity so it can bounce back from the signs of ageing, resulting in firmer-looking, more resilient skin.",
            directions:
              "After cleansing, apply 2-3 pumps AM and PM to a clean dry face.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/06/Obagi_Elastiderm_Facial_Serum_uk.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-elastiderm-facial-serum-uk/",
          },
          "Obagi Hydrate Luxe Facial Moisturiser": {
            blurb:
              "Obagi Hydrate Luxe is crafted to nourish the skin overnight with its rich, creamy texture, providing hydration and replenishment.",
            directions:
              "Apply to face in the evening as part of your nightly skin care routine.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/02/OBAGI_Hydrate_Luxe_Moisture_Rich_Cream_UK.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-hydrate-luxe/",
          },
          "Obagi Daily Intensive Repair": {
            blurb:
              "Intensive Daily Repair exfoliating and hydrating lotion uses polyhydroxy acids (PHAs) to gently exfoliate the skin, helping to reduce the appearance of pores and visible aging signs.",
            directions:
              "Apply 2 to 3 pumps of the product daily before sunscreen, massaging gently into the face and extending down to the jawline and neck.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/08/Obagi_Intensive_Daily_Repair_IDR.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-intensive-daily-repair-idr/",
          },
          "Obagi Rebalance": {
            blurb:"Obagi Rebalance Skin barrier recovery cream helps to comfort, rehydrate and rebalance skin that is sensitive, compromised or prone to psoriasis, eczema, rosacea or acne.",
            directions:"Apply 2-4 pumps directly to desired area morning (followed by sunscreen) and evening (or as needed).",
            imgURL:"https://525dca3a.delivery.rocketcdn.me/wp-content/uploads/2024/09/Obagi_rebalance.webp",
            prodURL:"https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-rebalance-skin-barrier-recovery-cream/",
          },
          "Obagi Nu-Derm Foaming Gel": {
            blurb:
              "The Obagi Nu-Derm System helps transform the skin’s appearance by reducing dark spots and as a result revealing younger, healthier-looking skin. Gently removes makeup and everyday impurities for a clean, fresh complexion.",
            directions:
              "Wetten face and apply a pea sized amount of foaming gel and then massage into skin. Remove with water.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/04/OBAGI_Nu-Derm_1_Foaming_Gel_UK_2.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/foaming-gel-obagi-nu-derm-1/",
          },
          "Obagi Nu-Derm 1 Gentle Cleanser": {
            blurb:
              "Nu-Derm Gentle Cleanser is a mild facial wash that delicately eliminates dirt, oil, and makeup, leaving the skin clean and refreshed, and is ideal for normal to dry skin types.",
            directions:
              "Apply the cleanser with moistened fingertips to a damp face and neck, rinse thoroughly to remove dirt, grime, and makeup, and use twice daily, in the morning and at night.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/04/OBAGI_Nu-Derm_1_Gentle_Cleanser_UK.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-nu-derm-1-gentle-cleanser/",
          },
          "Obagi Nu-Derm Toner": {
            blurb:
              "Nu-Derm Toner is a crucial part of your daily skincare regimen; this alcohol-free, non-drying toner helps balance and preserve the natural pH of your skin. Use it after cleansing to eliminate impurities and dead skin cells and to ready the skin for subsequent products.",
            directions:
              "Shake and apply the toner with a saturated cotton pad after cleansing, without rinsing, twice daily during your morning and nighttime routines.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/04/OBAGI_Nu-Derm_2_Toner_UK.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-nu-derm-2-toner/",
          },
          "Obagi Nu-Derm Exfoderm": {
            blurb:
              "Nu-Derm Exfoderm is a lightweight lotion designed for normal to dry skin types that exfoliates away old, dull skin to unveil fresh, luminous skin for a brighter complexion.",
            directions: "Apply in the morning to cleanse skin.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/04/OBAGI_Nu-Derm_4_Exfoderm_UK.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-nu-derm-4-exfoderm/",
          },
          "Obagi Nu-Derm Exfoderm Forte": {
            blurb:
              "Nu-Derm Exfoderm Forte is a lightweight lotion formulated with glycolic and lactic acids for normal to oily skin types, exfoliating away old, dull skin and encouraging natural skin renewal for a noticeably smoother and more radiant complexion.",
            directions: "Apply in the morning to cleanse skin.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/04/OBAGI_Nu-Derm_4_Exfoderm_Forte_UK.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-nu-derm-4-exfoderm-forte/",
          },
          "Obagi Professional-C Peptide Complex": {
            blurb:
              "Obagi Professional-C Peptide Complex enhances skin firmness, reduces fine lines and wrinkles with Vitamin C, calms, brightens, improves texture, and evens out skin tone.",
            directions:
              "Apply 2 to 3 pumps to the face in the morning and evening.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/04/Obagi_Professional_C_Peptide_complex_UK.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-professional-c-peptide-complex/",
          },
          "Obagi Retinol 0.5 Cream": {
            blurb:
              "Obagi Retinol 0.5 Cream is a minimally-irritating, concentrated retinol formula which fights the signs of premature aging caused by environmental aggressors to promote a more radiant and youthful-looking complexion. This anti-wrinkle treatment boosts cell turnover to minimise fine lines and wrinkles while reducing hyperpigmentation.",
            directions:
              "Uncap the airless pump and apply 1 pump, or a pearl-sized amount to your face. Massage until fully absorbed. Use once daily in the evenings.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2023/11/Obagi_Retinol_uk.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-retinol/",
          },
          "Obagi Retivance Skin Rejuvenating Complex": {
            blurb:
              "RETIVANCE® Skin Rejuvenating Complex is a serum that harnesses the potent effects of retinaldehyde and is enriched with antioxidant-rich vitamins C and E. This premium formulation improves skin texture and visibly reduces fine lines and wrinkles, promoting a smoother, more youthful complexion.",
            directions:
              "Apply up to 3 pumps of Retivance to face and massage gently into skin. Always use sunscreen SPF 30 or higher the morning after you apply Retivance.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/08/Obagi_Retivance_Skin_Rejuvenating_Complex.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-retivance-skin-rejuvenating-complex/",
          },
          "Obagi Sun Shield Cool": {
            blurb:
              "Obagi Medical Sun Shield™ is a daily sunscreen perfect for year-round use, designed to enhance and match the natural complexion of cool-toned individuals.",
            directions:
              "Apply liberally 15 minutes before sun exposure and as needed.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/05/Obagi-Sun-Shield-Cool-1.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-sun-shield-cool/",
          },
          "Obagi Sun Shield Matte": {
            blurb:
              "Sun Shield Matte Broad Spectrum SPF 50 sunscreen offers both UVB and UVA protection in a non-comedogenic, matte finish that's dermatologist-tested and suitable for all skin types.",
            directions:
              "Apply liberally 15 minutes before sun exposure and as needed.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/02/OBAGI_Sunshield_Matte_UK.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-sun-shield/",
          },
          "Obagi Sun Shield Warm": {
            blurb:
              "Obagi Medical Sun Shield™ is a daily sunscreen perfect for year-round use, designed to enhance and match the natural complexion of warm-toned individuals.",
            directions:
              "Apply liberally 15 minutes before sun exposure and as needed.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/05/Obagi-Sun-Shield-Warm.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-sun-shield-warm/",
          },
          "Obagi Vitamin C Serum 10%": {
            blurb:
              "Obagi Professional-C® Serum 10% uses a concentrated 10% L-ascorbic Acid formula to deeply penetrate and rejuvenate skin by stimulating collagen production, reducing fine lines, and protecting against free radicals and UV damage.",
            directions: "Apply liberally over face after cleansing.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/02/OBAGI_Professional-C_Serum_10_UK.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-vitamin-c-serum-10/",
          },
          "Obagi Vitamin C Serum 15%": {
            blurb:
              "This daily antioxidant serum with 15% pure L-ascorbic acid defends against free radicals, brightens skin tone, and reduces signs of past damage.",
            directions: "Apply liberally over face after cleansing.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/02/OBAGI_Professional-C_Serum_15_UK.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-vitamin-c-serum-15/",
          },
          "Obagi Vitamin C Serum 20%": {
            blurb:
              "Obagi's Professional C® Serum 20% combines 20% L-Ascorbic Acid and Sodium Hyaluronate to brighten skin tone, reduce dark spots, strengthen antioxidant defenses, and improve the appearance of fine lines and wrinkles.",
            directions: "Apply liberally over face after cleansing.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/02/OBAGI_Professional-C_Serum_20_UK.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-vitamin-c-serum-20/",
          },
          "Obagi-C Rx Balancing Toner": {
            blurb:
              "Obagi-C Rx C-Balancing Toner, formulated for normal to oily skin, adjusts skin’s pH without drying, promoting a smoother, more radiant complexion while addressing hyperpigmentation, sun damage, and signs of aging.",
            directions:
              "Shake and apply the toner with a saturated cotton pad after cleansing, without rinsing, twice daily during your morning and nighttime routines.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/05/Obagi-C_RX_C-Balancing_Toner_UK.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-c-rx-c-balancing-toner/",
          },
          "Obagi-C Rx Exfoliating Day Lotion": {
            blurb:
              "Obagi-C Rx C-Exfoliating Day Lotion is a smooth, lightweight moisturiser that hydrates and gently exfoliates with glycolic acid to reveal a brighter, healthier-looking complexion.",
            directions:
              "Apply a small amount of the product to your face each morning, massaging gently until fully absorbed.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/05/Obagi-C_Rx_C-Exfoliating_Day_Lotion_uk.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-c-rx-c-exfoliating-day-lotion/",
          },
          "Obagi-C Rx Cleaning Gel": {
            blurb:
              "Obagi-C® C-Cleansing Gel is a Vitamin C-infused cleansing gel that removes makeup, excess oil, and impurities.",
            directions:
              "Apply to damp face and neck with moistened fingertips. Rub in a circular motion. Rinse completely with lukewarm water.",
            imgURL: "https://525dca3a.rocketcdn.me/wp-content/uploads/2020/04/OBAGI_C-Rx_Cleansing_Gel_UK-600x600.jpg",
            prodURL: "https://www.francesturnertraill.co.uk/shop/obagi-medical/obagi-c-rx-cleansing-gel/",
          },
        };


        // Expose the filter functions to the global scope
        filterProducts = function (questionType, selection) {
          if (!selection.trim()) return; // Ignore if default 'Select...' is chosen

          if (questionType === 'skinConcern') {
            // Initialize the product pool based on the selected skin concern
            switch (selection) {
              case 'dryDehydrated':
                initialProductPool = dryDehydratedProductPool.slice();
                break;
              case 'acne':
                initialProductPool = spotProneProductPool.slice();
                break;
              case 'wrinklesFinelines':
                initialProductPool = maturingProductPool.slice();
                break;
              case 'rosacea':
                initialProductPool = rosaceaProductPool.slice();
                break;
              case 'unevenSkinTone':
                initialProductPool = unevenSkinToneProductPool.slice();
                break;
              case 'improvements':
                initialProductPool = improvementsProductPool.slice();
                break;
              default:
                initialProductPool = [];
                break;
            }
            productPoolStack = [initialProductPool.slice()]; // Reset the product pool stack
          } else {
            const eliminationList = eliminationLists[questionType][selection];
            if (eliminationList) {
              applyFilterAndPushState(eliminationList);
            } else {
              applyFilterAndPushState([]);
              console.log("No selection criteria found. There is a missing entry in the elimination list!");
            }
          }

          navigateToNextQuestion(questionType, selection);
        };

        submitSelectedConcernAreas = function () {
          document.getElementById("questionConcernArea").style.display = "none";


          if (selectedConcernArea.includes("undereyeWhiteList")) {
            const index = selectedConcernArea.indexOf("undereyeWhiteList");
            if (index > -1) {
              selectedConcernArea.splice(index, 1);
            }
          }
          if (selectedConcernArea.includes("neckWhiteList")) {
            const index2 = selectedConcernArea.indexOf("neckWhiteList");
            if (index2 > -1) {
              selectedConcernArea.splice(index2, 1);
            }
          }

          if (!selectedConcernArea.includes("undereye") && !selectedConcernArea.includes("undereyeWhiteList")) {
            selectedConcernArea.push("undereyeWhiteList");
          }
          if (!selectedConcernArea.includes("neck") && !selectedConcernArea.includes("neckWhiteList")) {
            selectedConcernArea.push("neckWhiteList");
          }

          console.log("Selected concern areas: ", selectedConcernArea);
          filterProductsMultiple("concernArea", selectedConcernArea);
        };

        filterProductsMultiple = function (questionType, selections) {
          console.log(selections);
          // Check if selections array is empty or not provided
          if (!selections || selections.length === 0) {
            navigateToNextQuestion(questionType, "none");
            return;
          }

          // Check if 'fragrances' is selected
          if (selections.includes('fragrances')) {
            navigateToNextQuestion(questionType, "fragrances");
            return;
          }

          let combinedEliminationList = [];

          // Iterate over each selection and combine elimination lists
          selections.forEach((selection) => {
            const eliminationList = eliminationLists[questionType][selection];
            if (eliminationList) {
              combinedEliminationList =
                combinedEliminationList.concat(eliminationList);
            }
          });

          // Remove duplicates from combinedEliminationList
          combinedEliminationList = [...new Set(combinedEliminationList)];

          // Apply the combined elimination list
          if (combinedEliminationList) {
            applyFilterAndPushState(combinedEliminationList);
          } else {
            applyFilterAndPushState([]);
            console.log("No selection criteria found");
          }

          // Assuming navigateToNextQuestion function doesn't need modification for this purpose
          navigateToNextQuestion(questionType, selections[0]); // Example, adjust navigation logic as needed
        };

        gatherMultipleFilters = function (questionType) {
          // Directly target the allergy select element
          const form = document.getElementById(questionType);
          const checkboxes = form.querySelectorAll('input[type="checkbox"]:checked');
          const selectedValues= Array.from(checkboxes).map(checkbox => checkbox.value);

          filterProductsMultiple("allergy", selectedValues);

        };

        function applyFilterAndPushState(eliminationList) {
          let currentPool = productPoolStack[productPoolStack.length - 1];
          let newPool = currentPool.filter(
            (product) => !eliminationList.includes(product)
          );

          // Find removed products for logging
          let removedProducts = currentPool.filter((product) =>
            eliminationList.includes(product)
          );

          // Log removed products, if any
          if (removedProducts.length > 0) {
            console.log(`Filtered out products: ${removedProducts.join(", ")}`);
          } else {
            console.log(
              "No products were filtered out with the latest selection."
            );
          }

          productPoolStack.push(newPool);
        }

        function navigateToNextQuestion(questionType, selection) {
          // Determine next question based on current question type
          const currentQuestionId = `question${
            questionType.charAt(0).toUpperCase() + questionType.slice(1)
          }`;
          // Only push if we're not navigating from the first question or repeating the same question

          navigationStack.push(currentQuestionId);
          console.log(
            "Pushed " + currentQuestionId + " onto the navigation stack"
          );

          console.log("Current Product Pool:", productPoolStack[productPoolStack.length - 1]);

          let nextQuestionId;
          switch (questionType) {
            case "skinConcern":
              if (selection === "acne") {
                nextQuestionId = "typeOfAcne";
              } else {
                nextQuestionId = "basedUK";
              }
              break;
            case "basedUK":
              if (selection === "yes") {
                nextQuestionId = "overTwentyFive";
              } else {
                // Handle "No" case, assuming there's a message or action for non-UK users
                // For the purpose of this switch, assume it ends the questionnaire or suggests an action
                goToExitPoint(
                  "Apologies, but we currently only ship products within the UK."
                );
                nextQuestionId = "exitPoint";
              }
              break;
            case "overTwentyFive":
              nextQuestionId = "usesVitaminC";
              break;
            case "wrinklesFinelines":
              nextQuestionId = "allergy";
              break;
            case "typeOfAcne":
              if (selection === "cystic") {
                goToExitPoint(
                  "We recommend you book a consultation to provide you with professional advice."
                );
                nextQuestionId = "exitPoint";
              } else {
              nextQuestionId = "severityOfAcne";
              }
              break;
            case "usesVitaminC":
              nextQuestionId = "allergy";
              break;
            case "severityOfAcne":
              if (selection === "severe") {
                goToExitPoint(
                  "We recommend you book a consultation to provide you with prescription-only products."
                );
                nextQuestionId = "exitPoint";
                break;
              } else {
                nextQuestionId = "basedUK";
                break;
              }
            case "typeOfHyperpigmentation":
              nextQuestionId = "usesVitaminC";
              break;
            case "allergy":
              if (selection.includes('fragrances')) {
                goToExitPoint("Our products contain low allergenic profiles.");
                nextQuestionId = "exitPoint";
                break;
              } else {
                nextQuestionId = "takePrescription";
                break;
              }
            case "takePrescription":
              if (selection === "yes") {
                goToExitPoint(
                  "It is not recommended to use skincare products with active ingredients while on topical medication. Please wait until your treatment ends and try again."
                );
                nextQuestionId = "exitPoint";
                break;
              } else {
                nextQuestionId = "retinoidUse";
                break;
              }
            case "retinoidUse":
              if (selection === "yes") {
                nextQuestionId = "retinoidIrritation";
                break;
              } else {
                nextQuestionId = "skinType";
                break;
              }
            case "retinoidIrritation":
              nextQuestionId = "skinType";
              break;
            case "skinType":
              nextQuestionId = "skinSensitivity";
              break;
            case "skinSensitivity":
              nextQuestionId = "concernArea";
              break;
            case "concernArea":
              nextQuestionId = "sunscreenUse";
              break;
            case "sunscreenUse":
              nextQuestionId = "routineComplexity";
              break;
            case "routineComplexity":
              console.log(selection);
              setComplexity(selection);
              suggestProduct(); // This is the end of the questionnaire, leading to product suggestion
              return; // Exit the function early
            // Add additional cases as necessary based on your flowchart's specific paths and outcomes
            default:
              console.error("Unhandled question type: " + questionType);
              return; // Exit for safety in case of an unhandled question type
          }

          const formattedCurrentQuestionId = `question${
            questionType.charAt(0).toUpperCase() + questionType.slice(1)
          }`;

          const formattedNextQuestionId = `question${
            nextQuestionId.charAt(0).toUpperCase() + nextQuestionId.slice(1)
          }`;
          showNextQuestion(formattedCurrentQuestionId, formattedNextQuestionId);
        }

        goToExitPoint = function (message) {
          const exitPointText = document.getElementById("exitPointParagraph");
          if (exitPointText) {
            exitPointText.textContent = message;
          }
        };

        // Function to show the next question
        // Modified showNextQuestion function
        showNextQuestion = function (currentQuestionId, nextQuestionId) {
          const currentElement = document.getElementById(currentQuestionId);
          const nextElement = document.getElementById(nextQuestionId);

          // Apply slide-out animation to current element
          if (currentElement) {
            currentElement.classList.add("question-slide-out");
          }

          setTimeout(
            () => {
              if (currentElement) {
                currentElement.style.display = "none"; // Hide after animation
                currentElement.classList.remove("question-slide-out"); // Clean up class
              }

              if (nextElement) {
                nextElement.style.display = "block"; // Display the next question
                nextElement.classList.add("question-slide-in");
                setTimeout(() => {
                  nextElement.classList.remove("question-slide-in");
                }, 500); // This matches the animation duration
              }
            },
            250 // Wait for the slide-out animation to complete
          );
        };

        goToPreviousQuestion = function goToPreviousQuestion() {
          // Pop the current product pool as we're navigating back
          if (productPoolStack.length > 1) {
            const currentPool = productPoolStack[productPoolStack.length - 1];
            const previousPool = productPoolStack[productPoolStack.length - 2];

            // Use the comparison function before actually popping the pool
            const { addedProducts, removedProducts } = compareProductPools(
              currentPool,
              previousPool
            );

            // Now pop the current pool since we're going back
            productPoolStack.pop();
            console.log(
              "Navigating back to " + navigationStack[navigationStack.length - 1]
            );

            // Log or update UI with the differences
            if (removedProducts.length > 0) {
              console.log(
                `Products were removed when undoing, this should not happen!`
              );
            }
            if (addedProducts.length > 0) {
              console.log(
                `Added back products when undoing: ${addedProducts.join(", ")}`
              );
            } else {
              console.log("No products were added back with this undo");
            }
          }

          // Pop the current navigation state off as we're navigating back
          if (navigationStack.length === 0) {
            // If the stack is empty, we're at the start; handle accordingly
            // Example: document.getElementById('questionsContainer').style.display = 'none';
            return;
          }

          const previousQuestionId = navigationStack.pop(); // manage the navigation stack properly

          // Find the currently displayed question
          const currentElement = document.querySelector(
            '.question:not([style*="display: none"])'
          );

          console.log("Previous element is " + previousQuestionId);

          // Find the previous question element
          const previousElement = document.getElementById(previousQuestionId);

          // Ensure we have elements to work with
          if (!currentElement || !previousElement) return;

          // Slide-out animation for current question
          currentElement.classList.add("question-slide-out-reverse");

          // Wait for the slide-out animation to finish
          setTimeout(() => {
            currentElement.style.display = "none";
            currentElement.classList.remove("question-slide-out-reverse");

            // Prepare the previous element for sliding in from the left
            previousElement.style.display = "block";

            // Force a reflow to ensure the slide-in animation definitely occurs
            void previousElement.offsetWidth;

            previousElement.classList.add("question-slide-in-reverse");

            // Clean up by removing the animation class after it ends
            setTimeout(() => {
              previousElement.classList.remove("question-slide-in-reverse");
              
              // For example, clear any <select> in the previous question
              const allSelects = previousElement.querySelectorAll('select');
              allSelects.forEach(selectEl => {
                selectEl.value = '';           // or selectEl.selectedIndex = 0
              });

              // Clear any checkboxes or radio buttons if needed
              const allInputs = previousElement.querySelectorAll('input[type="checkbox"], input[type="radio"]');
              allInputs.forEach(input => {
                input.checked = false;
              });

              // If you want to reset text fields:
              const allTextInputs = previousElement.querySelectorAll('input[type="text"]');
              allTextInputs.forEach(input => {
                input.value = '';
              });

              if (previousElement.id === "questionConcernArea") {
                // Reset the array
                selectedConcernArea = [];
                // Clear the UI list
                const listContainer = document.getElementById("stringList");
                listContainer.innerHTML = "";
              }

              // You could similarly reset any relevant variables in your JS data if needed
            }, 500); // Match the animation duration
          }, 250); // Wait for slide-out to complete before showing the previous question
        };

        // Update your HTML accordingly, replacing direct calls to goToPreviousQuestion with just goToPreviousQuestion() without parameters.

        // Function for showing suggestions with slide-in animation
        function compareProductPools(previousPool, currentPool) {
          const addedProducts = currentPool.filter(
            (product) => !previousPool.includes(product)
          );
          const removedProducts = previousPool.filter(
            (product) => !currentPool.includes(product)
          );

          return {
            addedProducts,
            removedProducts,
          };
        }

        function setComplexity(newComplexity) {
          if (newComplexity === "hero") {
            complexity = "hero";
          } else if (newComplexity === "essentials") {
            complexity = "essentials";
          } else if (newComplexity === "advanced") {
            complexity = "advanced";
          }
          console.log("Set complexity to " + complexity);
          poolLength = productPoolStack[productPoolStack.length - 1].length;
        }
        function suggestProduct() {
          // Access the current product pool from the top of the stack
          const currentProductPool =
            productPoolStack[productPoolStack.length - 1];

          // Prepare for the slide-out animation of the last question
          const lastQuestionElement = document.getElementById(
            "questionRoutineComplexity"
          );
          if (lastQuestionElement) {
            lastQuestionElement.classList.add("question-slide-out");
            setTimeout(() => {
              // Once the slide-out is complete, proceed to display suggestions
              lastQuestionElement.style.display = "none"; // Ensure the element is hidden
              lastQuestionElement.classList.remove("question-slide-out"); // Clean up class

              const suggestionResultContainer =
                document.getElementById("suggestionResult");

              document.getElementById("heroSection").style.display = "none";
              document.getElementById("essentialsSection").style.display = "none";
              document.getElementById("advancedSection").style.display = "none";

              if (complexity == "hero") {
                document.getElementById("heroSection").style.display = "block";
                const heroProduct = currentProductPool.slice(0, 1);

                const hero1 = heroProduct[0];

                document.getElementById("heroProductDetails").innerHTML = 
                document.getElementById("heroProductDetails").innerHTML +
                `
                  <h3>${hero1}</h3>
                  <p>${productBlurbs[hero1]?.blurb || "No description"}</p>
                  <p>${productBlurbs[hero1]?.directions || "No directions"}</p>
                `;
                document.getElementById("heroProductImage").src = productBlurbs[hero1]?.imgURL;
                document.getElementById("heroProductLink").href = productBlurbs[hero1]?.prodURL || "https://www.francesturnertraill.co.uk/";

              } else if (complexity == "essentials") {
                document.getElementById("essentialsSection").style.display = "block";
                const essentialsProducts = currentProductPool.slice(0, 3);

                const essentials1 = essentialsProducts[0];
                const essentials2 = essentialsProducts[1];
                const essentials3 = essentialsProducts[2];

                document.getElementById("essentials1").innerHTML = 
                document.getElementById("essentials1").innerHTML +
                `
                  <h3>${essentials1}</h3>
                  <p>${productBlurbs[essentials1]?.blurb || "No description"}</p>
                  <p>${productBlurbs[essentials1]?.directions || "No directions"}</p>
                `;
                document.getElementById("essentials1ProductImage").src = productBlurbs[essentials1]?.imgURL;
                document.getElementById("essentials1ProductLink").href = productBlurbs[essentials1]?.prodURL || "https://www.francesturnertraill.co.uk/";

                document.getElementById("essentials2").innerHTML =
                document.getElementById("essentials2").innerHTML +
                `
                  <h3>${essentials2}</h3>
                  <p>${productBlurbs[essentials2]?.blurb || "No description"}</p>
                  <p>${productBlurbs[essentials2]?.directions || "No directions"}</p>
                `;
                document.getElementById("essentials2ProductImage").src = productBlurbs[essentials2]?.imgURL;
                document.getElementById("essentials2ProductLink").href = productBlurbs[essentials2]?.prodURL || "https://www.francesturnertraill.co.uk/";

                document.getElementById("essentials3").innerHTML =
                document.getElementById("essentials3").innerHTML +
                `
                  <h3>${essentials3}</h3>
                  <p>${productBlurbs[essentials3]?.blurb || "No description"}</p>
                  <p>${productBlurbs[essentials3]?.directions || "No directions"}</p>
                `;
                document.getElementById("essentials3ProductImage").src = productBlurbs[essentials3]?.imgURL;
                document.getElementById("essentials3ProductLink").href = productBlurbs[essentials3]?.prodURL || "https://www.francesturnertraill.co.uk/";

              } else if (complexity == "advanced") {
                document.getElementById("advancedSection").style.display = "block";
                const advancedProducts = currentProductPool

                const advanced1 = advancedProducts[0];
                const advanced2 = advancedProducts[1];
                const advanced3 = advancedProducts[2];
                const advanced4 = advancedProducts[3];
                const advanced5 = advancedProducts[4];
                const advanced6 = advancedProducts[5];
                const advanced7 = advancedProducts[6];
                const advanced8 = advancedProducts[7];


                document.getElementById("advanced1").innerHTML = 
                document.getElementById("advanced1").innerHTML +
                `
                  <h3>${advanced1}</h3>
                  <p>${productBlurbs[advanced1]?.blurb || "No description"}</p>
                  <p>${productBlurbs[advanced1]?.directions || "No directions"}</p>
                `;
                document.getElementById("advanced1ProductImage").src = productBlurbs[advanced1]?.imgURL;
                document.getElementById("advanced1ProductLink").href = productBlurbs[advanced1]?.prodURL || "https://www.francesturnertraill.co.uk/";

                document.getElementById("advanced2").innerHTML = 
                document.getElementById("advanced2").innerHTML +
                `
                  <h3>${advanced2}</h3>
                  <p>${productBlurbs[advanced2]?.blurb || "No description"}</p>
                  <p>${productBlurbs[advanced2]?.directions || "No directions"}</p>
                `;
                document.getElementById("advanced2ProductImage").src = productBlurbs[advanced2]?.imgURL;
                document.getElementById("advanced2ProductLink").href = productBlurbs[advanced2]?.prodURL || "https://www.francesturnertraill.co.uk/";

                document.getElementById("advanced3").innerHTML = 
                document.getElementById("advanced3").innerHTML +
                `
                  <h3>${advanced3}</h3>
                  <p>${productBlurbs[advanced3]?.blurb || "No description"}</p>
                  <p>${productBlurbs[advanced3]?.directions || "No directions"}</p>
                `;
                document.getElementById("advanced3ProductImage").src = productBlurbs[advanced3]?.imgURL;
                document.getElementById("advanced3ProductLink").href = productBlurbs[advanced3]?.prodURL || "https://www.francesturnertraill.co.uk/";

                if (poolLength > 3) {
                  document.getElementById("advanced4").innerHTML = 
                  document.getElementById("advanced4").innerHTML +
                  `
                    <h3>${advanced4}</h3>
                    <p>${productBlurbs[advanced4]?.blurb || "No description"}</p>
                    <p>${productBlurbs[advanced4]?.directions || "No directions"}</p>
                  `;
                  document.getElementById("advanced4ProductImage").src = productBlurbs[advanced4]?.imgURL;
                  document.getElementById("advanced4ProductLink").href = productBlurbs[advanced4]?.prodURL || "https://www.francesturnertraill.co.uk/";

                  if (poolLength > 4) {
                    document.getElementById("advanced5").innerHTML = 
                    document.getElementById("advanced5").innerHTML +
                    `
                      <h3>${advanced5}</h3>
                      <p>${productBlurbs[advanced5]?.blurb || "No description"}</p>
                      <p>${productBlurbs[advanced5]?.directions || "No directions"}</p>
                    `;
                    document.getElementById("advanced5ProductImage").src = productBlurbs[advanced5]?.imgURL;
                    document.getElementById("advanced5ProductLink").href = productBlurbs[advanced5]?.prodURL || "https://www.francesturnertraill.co.uk/";

                    if (poolLength > 5) {
                      document.getElementById("advanced6").innerHTML = 
                      document.getElementById("advanced6").innerHTML +
                      `
                        <h3>${advanced6}</h3>
                        <p>${productBlurbs[advanced6]?.blurb || "No description"}</p>
                        <p>${productBlurbs[advanced6]?.directions || "No directions"}</p>
                      `;
                      document.getElementById("advanced6ProductImage").src = productBlurbs[advanced6]?.imgURL;
                      document.getElementById("advanced6ProductLink").href = productBlurbs[advanced6]?.prodURL || "https://www.francesturnertraill.co.uk/";

                      if (poolLength > 6) {
                        document.getElementById("advanced7").innerHTML = 
                        document.getElementById("advanced7").innerHTML +
                        `
                          <h3>${advanced7}</h3>
                          <p>${productBlurbs[advanced7]?.blurb || "No description"}</p>
                          <p>${productBlurbs[advanced7]?.directions || "No directions"}</p>
                        `;
                        document.getElementById("advanced7ProductImage").src = productBlurbs[advanced7]?.imgURL;
                        document.getElementById("advanced7ProductLink").href = productBlurbs[advanced7]?.prodURL || "https://www.francesturnertraill.co.uk/";

                        if (poolLength > 7) {
                          document.getElementById("advanced8").innerHTML = 
                          document.getElementById("advanced8").innerHTML +
                          `
                            <h3>${advanced8}</h3>
                            <p>${productBlurbs[advanced8]?.blurb || "No description"}</p>
                            <p>${productBlurbs[advanced8]?.directions || "No directions"}</p>
                          `;
                          document.getElementById("advanced8ProductImage").src = productBlurbs[advanced8]?.imgURL;
                          document.getElementById("advanced8ProductLink").href = productBlurbs[advanced8]?.prodURL || "https://www.francesturnertraill.co.uk/";
                        }
                      }
                    }
                  }
                }

                if (poolLength < 4) {
                  document.getElementById("advanced4").remove();
                }
                if (poolLength < 5) {
                  document.getElementById("advanced5").remove();
                }
                if (poolLength < 6) {
                  document.getElementById("advanced6").remove();
                }
                if (poolLength < 7) {
                  document.getElementById("advanced7").remove();
                }
                if (poolLength < 8) {
                  document.getElementById("advanced8").remove();
                }

              if (currentProductPool.length <= 0) {
                // Handle case where no products are left after filtering
                suggestionResultContainer.innerHTML = "<h2>No products match your criteria.</h2>";
              }
            }

              // Ensure the result container is initially visible for the animation
              suggestionResultContainer.style.display = "block";

              // Apply the slide-in animation to the suggestions
              suggestionResultContainer.classList.add("suggestions-slide-in");

              // Optionally, reset the animation class to enable re-animating in future
              setTimeout(() => {
                suggestionResultContainer.classList.remove(
                  "suggestions-slide-in"
                );
              }, 500); // This duration should match the CSS animation time

              // Hide the questions container
              document.getElementById("questionsContainer").style.display =
                "none";
            }, 500); // Delay to match the slide-out animation of the last question
          }
        }

        /*
        function displayProducts(products, detailIds, imageIds, linkIds) {
          products.forEach((product, index) => {
            const detailElement = document.getElementById(detailIds[index]);
            const imageElement = document.getElementById(imageIds[index]);
            const linkElement = document.getElementById(linkIds[index]);

            if (detailElement && imageElement && linkElement) {
              detailElement.innerHTML =
              detailElement.innerHTML +
              `
                <h3>${product}</h3>
                <p>${productBlurbs[product]?.blurb || "No description"}</p>
                <p>${productBlurbs[product]?.directions || "No directions"}</p>
              `;
              imageElement.src = productBlurbs[product]?.imgURL;
              console.log(imageElement);
              linkElement.href = productBlurbs[product]?.prodURL;
            } else {
              console.error(`Element not found for product: ${product}`);
            }
          });
        }

        //perhaps could rework this function in the future

        */

        let selectedConcernArea = [];
        selectConcernArea = function (selectedArea) {
          if (selectedConcernArea.includes(selectedArea)) {
            selectedConcernArea = selectedConcernArea.filter(
              (area) => area !== selectedArea
            );
          } else {
            selectedConcernArea.push(selectedArea);
          }

          console.log("Selected concern areas: ", selectedConcernArea);

          var listContainer = document.getElementById("stringList");

          // Initialize an empty string that will hold the list items
          var listItems = "";

          // Loop through the list of strings
          for (var i = 0; i < selectedConcernArea.length; i++) {
            // For each string, add a list item to the listItems string
            listItems +=
              "<li>" + capitalizeFirstLetter(selectedConcernArea[i]) + "</li>";
          }

          // Set the innerHTML of the list container to the listItems string
          listContainer.innerHTML = listItems;
        };

        function capitalizeFirstLetter(string) {
          return string.charAt(0).toUpperCase() + string.slice(1);
        }
      });
    </script>
  </body>
</html>